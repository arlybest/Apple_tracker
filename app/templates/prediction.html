<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
  <title>Apple Tracker - Tableau de bord analytique</title>
  <meta name="description" content="Tableau de bord d'analyse pour le suivi des performances Apple." />

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico" />

  <!-- Polices -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  
  <!-- Icônes -->
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/fonts/boxicons.css') }}" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.0/lottie.min.js"></script>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  
  <!-- Styles CSS principaux -->
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/css/core.css') }}" class="template-customizer-core-css" />
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/css/theme-default.css') }}" class="template-customizer-theme-css" />
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/demo.css') }}" />

  <!-- CSS des bibliothèques tierces -->
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendor/libs/apex-charts/apex-charts.css') }}" />

  <!-- Scripts JS auxiliaires -->
  <script src="{{ url_for('static', filename='assets/vendor/js/helpers.js') }}"></script>

  <!-- Configuration du thème -->
  <script src="{{ url_for('static', filename='assets/js/config.js') }}"></script>
</head>

<body>
  <!-- Conteneur de la mise en page -->
  <div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">

      <!-- Barre latérale -->
      <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
        <div class="app-brand demo">
          <a href="{{ url_for('main.home') }}" class="app-brand-link">
            <span class="app-brand-logo demo">
              <!-- Logo en SVG -->
              <svg width="25" viewBox="0 0 25 42" xmlns="http://www.w3.org/2000/svg">
                <g fill="none" fill-rule="evenodd">
                  <path d="M13.79,0.36 L3.4,7.44 C0.57,9.69 -0.38,12.48 0.56,15.8 C0.69,16.23 1.1,17.79 3.12,19.23 C3.81,19.72 5.32,20.38 7.65,21.22 L2.63,24.55 C0.45,26.3 0.09,28.51 1.56,31.17 C2.84,32.82 5.21,33.26 7.09,32.54 C8.35,32.06 11.46,30 16.42,26.37 C18.03,24.5 18.7,22.45 18.41,20.24 C17.96,17.53 16.18,15.58 13.05,14.37 L10.92,13.47 L18.62,7.98 Z" fill="#696cff"></path>
                  <path d="M20.6,7.13 L25.6,13.8 C26.26,14.68 26.08,15.94 25.2,16.6 C24.85,16.86 24.43,17 24,17 H14 C12.9,17 12,16.1 12,15 C12,14.57 12.14,14.15 12.4,13.8 L17.4,7.13 C18.06,6.25 19.32,6.07 20.2,6.73 C20.35,6.85 20.49,6.98 20.6,7.13 Z" fill="#696cff"></path>
                </g>
              </svg>
            </span>
            <span class="app-brand-text demo menu-text fw-bolder ">Apple Tracker</span>
          </a>
          <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
            <i class="bx bx-chevron-left bx-sm align-middle"></i>
          </a>
        </div>

        <div class="menu-inner-shadow"></div>
        <ul class="menu-inner py-1">
          <!-- Lien vers le tableau de bord -->
          <li class="menu-item ">
              <a href="{{ url_for('main.home') }}" class="menu-link">
                  <i class="menu-icon tf-icons bx bx-home-circle"></i>
                  <div data-i18n="Analytics">Tableau de bord</div>
              </a>
          </li>
      
          <!-- Lien vers la page Machine Learning -->
          <li class="menu-item active">
              <a href="{{ url_for('main.prediction') }}" class="menu-link">
                  <i class="menu-icon tf-icons bx bx-brain"></i>
                  <div data-i18n="Machine Learning">Machine Learning</div>
              </a>
          </li>
      </ul>
      </aside>

      <!-- Contenu principal -->
      <div class="layout-page">
        <div class="content-wrapper">

          <!-- Description de la prédiction -->
          <div class="prediction-description">
            <h2>Prédiction du cours de l'action Apple</h2>
            <p>Cette fonctionnalité utilise une intelligence artificielle basée sur les réseaux neuronaux LSTM (Long Short-Term Memory) pour prédire le cours de l'action Apple. Le modèle analyse les tendances passées et fournit une prédiction des 5 jours à venir.</p>
          </div>

          <!-- Bouton de prédiction avec animation Lottie -->
          <div class="prediction-button">
            <button id="predict-button" class="btn btn-primary">
              <lottie-player src="https://assets10.lottiefiles.com/packages/lf20_wlklw44p.json"  background="transparent"  speed="1"  style="width: 50px; height: 50px;" loop autoplay></lottie-player>
              Prédire les 5 prochains jours
            </button>
          </div>

          <!-- Affichage des prédictions -->
          <div id="prediction-results" style="display: none;">
            <h3>Prédictions pour les 5 prochains jours :</h3>
            <ul id="prediction-list"></ul>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    document.getElementById("predict-button").addEventListener("click", function() {
      // Appel à l'API Flask pour récupérer les prédictions
      fetch('/prediction')
        .then(response => response.json())
        .then(data => {
          let predictions = data.predictions;
          
          // Affichage des prédictions
          let predictionList = document.getElementById("prediction-list");
          predictionList.innerHTML = ''; // Clear previous predictions
          
          predictions.forEach(prediction => {
            let listItem = document.createElement("li");
            listItem.textContent = `${prediction.date}: Open - ${prediction.open}, High - ${prediction.high}, Low - ${prediction.low}, Predicted Close - ${prediction.predicted_close}`;
            predictionList.appendChild(listItem);
          });
          
          // Afficher la section des résultats
          document.getElementById("prediction-results").style.display = "block";
        })
        .catch(error => {
          console.error("Erreur lors de la récupération des prédictions : ", error);
        });
    });
  </script>
</body>
</html>
